<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Care Flow</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables */
        :root {
            --primary-color: #1e3a8a;
            --primary-hover: #2563eb;
            --text-dark: #1e3a8a;
            --text-muted: #4b5563;
            --text-light: #6b7280;
            --bg-light: #f9fafc;
            --bg-white: #ffffff;
            --border-color: #e2e8f0;
            --shadow-sm: 0 4px 12px rgba(0,0,0,0.05);
            --shadow-md: 0 6px 16px rgba(0,0,0,0.1);
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --font-size-sm: 0.85rem;
            --font-size-base: 0.9rem;
            --font-size-lg: 1rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
        }

        /* Base Styles */
        html, body {
            font-family: 'Inter', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%);
            min-height: 100vh;
            margin: 0;
            overflow: auto;
        }

        /* Layout */
        .book-wrapper {
            display: flex;
            max-width: 1400px;
            margin: var(--spacing-lg) auto;
            background: var(--bg-white);
            border-radius: 1.5rem;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        .sidebar {
            width: 300px;
            background: var(--bg-light);
            border-right: 1px solid var(--border-color);
            padding: var(--spacing-lg);
            overflow-y: auto;
            transition: width 0.3s ease;
        }

        .content-area {
            flex: 1;
            padding: var(--spacing-xl);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #e6f0fa;
            background: var(--bg-white);
        }

        /* Sidebar Components */
        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .sidebar h2 {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--text-dark);
        }

        .search-container {
            position: relative;
            margin-bottom: var(--spacing-lg);
        }

        .search-input {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md) var(--spacing-sm) 2.5rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: var(--font-size-base);
            transition: border-color 0.2s ease;
        }

        .search-input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        /* Content Components */
        .template-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
        }

        .template-title {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--text-dark);
        }

        .copy-button, .inquiries-button {
            padding: var(--spacing-sm) var(--spacing-lg);
            background: var(--primary-color);
            color: var(--bg-white);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.1s ease;
            margin-left: var(--spacing-sm);
        }

        .copy-button:hover, .inquiries-button:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        .data-item {
            background: var(--bg-light);
            padding: var(--spacing-lg);
            border-radius: 1rem;
            border: 1px solid var(--border-color);
            font-size: var(--font-size-base);
            line-height: 1.5;
        }

        .step-container {
            flex: 1 1 220px;
            min-width: 220px;
            max-width: 260px;
            margin: var(--spacing-sm);
            background: var(--bg-white);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: var(--spacing-md);
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }

        .step-container:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .number-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--primary-color);
            color: var(--bg-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: var(--font-size-base);
        }

        .step-icon {
            width: 24px;
            height: 24px;
            color: var(--primary-color);
        }

        .connector-svg {
            width: 40px;
            height: 40px;
            flex: 0 0 40px;
        }

        .step-title {
            color: var(--text-dark);
            font-weight: 600;
            font-size: var(--font-size-lg);
        }

        .step-description {
            color: var(--text-muted);
            font-size: var(--font-size-base);
            margin-top: var(--spacing-sm);
        }

        .step-bullets {
            list-style-type: disc;
            padding-left: var(--spacing-lg);
            margin-top: var(--spacing-sm);
        }

        .step-bullets li {
            color: var(--text-light);
            font-size: var(--font-size-sm);
            padding: 0.25rem 0;
        }

        .inquiries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-md);
        }

        .inquiry-card {
            width: 100%;
            background: var(--bg-white);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: var(--spacing-md);
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }

        .inquiry-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .card-title {
            color: var(--text-dark);
            font-weight: 600;
            font-size: var(--font-size-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            text-align: left;
            background: none;
            border: none;
            cursor: pointer;
        }

        .card-title::after {
            content: '▶';
            font-size: var(--font-size-sm);
            color: var(--primary-color);
            transition: transform 0.3s ease;
        }

        .card-title.collapsed::after {
            content: '▼';
        }

        .card-content {
            color: var(--text-muted);
            font-size: var(--font-size-base);
            margin-top: var(--spacing-sm);
            display: block;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            max-height: 500px;
            opacity: 1;
        }

        .card-content.collapsed {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }

        .card-bullets {
            list-style-type: disc;
            padding-left: var(--spacing-lg);
            margin-top: var(--spacing-sm);
        }

        .card-bullets li {
            color: var(--text-light);
            font-size: var(--font-size-sm);
            padding: 0.25rem 0;
        }

        .card-note {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Media Queries */
        @media (max-width: 1024px) {
            .book-wrapper {
                flex-direction: column;
                margin: 0;
                border-radius: 0;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                max-height: calc(40vh - var(--spacing-lg));
            }

            .content-area {
                padding: var(--spacing-lg);
            }

            .step-container {
                min-width: 100%;
                max-width: 100%;
                margin: var(--spacing-sm) 0;
            }

            .inquiries-grid {
                grid-template-columns: 1fr;
            }

            .inquiry-card {
                min-width: 100%;
                max-width: 100%;
                margin: var(--spacing-sm) 0;
            }

            .connector-svg {
                transform: rotate(90deg);
                margin: var(--spacing-sm) 0;
            }
        }

        @media (max-width: 640px) {
            .template-title {
                font-size: var(--font-size-xl);
            }

            .data-item {
                padding: var(--spacing-md);
            }

            .search-input {
                font-size: var(--font-size-sm);
            }
        }
    </style>
</head>
<body>
    <div class="book-wrapper">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>Customer Care Productivity Flow</h2>
            </div>
            <div class="search-container">
                <svg class="search-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                <input type="text" id="searchInput" class="search-input" placeholder="Search templates..." aria-label="Search templates">
            </div>
            <button class="section-title font-semibold text-blue-900 mt-6 mb-2 cursor-pointer hover:text-blue-600" data-section="RT Ticket Flow">RT Ticket Flow</button>
            <button class="section-title font-semibold text-blue-900 mb-2 cursor-pointer hover:text-blue-600" data-section="Retention Team Flow">Retention Team Flow</button>
            <button class="section-title font-semibold text-blue-900 mb-2 cursor-pointer hover:text-blue-600" data-section="Collection Team Flow">Collection Team Flow</button>
        </nav>
        <main class="content-area">
            <div class="template-header">
                <div id="templateTitle" class="template-title">RT Ticket Flow</div>
                <div>
                    <button id="inquiriesButton" class="inquiries-button">RT Ticket Inquiries</button>
                    <button id="copyButton" class="copy-button">Copy Template</button>
                </div>
            </div>
            <div id="templateContent" class="data-item">
                <div class="flex flex-row flex-wrap items-start gap-2">
                    <div class="step-container">
                        <div class="flex flex-col items-start gap-2">
                            <div class="flex items-center gap-2">
                                <span class="number-icon">1</span>
                                <svg class="step-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                </svg>
                                <span class="step-title">Receive Request</span>
                            </div>
                            <div class="step-description">
                                Request will received by:
                                <ul class="step-bullets">
                                    <li>Facebook</li>
                                    <li>Website</li>
                                    <li>Email</li>
                                    <li>Hotline</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <svg class="connector-svg" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 20C5 20, 15 10, 35 20" stroke="url(#grad1)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4 4"/>
                        <path d="M30 15L35 20L30 25" fill="none" stroke="url(#grad1)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="step-container">
                        <div class="flex flex-col items-start gap-2">
                            <div class="flex items-center gap-2">
                                <span class="number-icon">2</span>
                                <svg class="step-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10m0 0v10m0-10l-4 4m4-4l4 4" />
                                </svg>
                                <span class="step-title">Create Ticket</span>
                            </div>
                            <div class="step-description">
                                Ticket will created by:
                                <ul class="step-bullets">
                                    <li>Tier1</li>
                                    <li>Sale (EOS)</li>
                                    <li>BO</li>
                                    <li>Internal Team</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <svg class="connector-svg" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 20C5 20, 15 10, 35 20" stroke="url(#grad2)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4 4"/>
                        <path d="M30 15L35 20L30 25" fill="none" stroke="url(#grad2)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="step-container">
                        <div class="flex flex-col items-start gap-2">
                            <div class="flex items-center gap-2">
                                <span class="number-icon">3</span>
                                <svg class="step-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a2 2 0 00-2-2h-3m-2-2H5a2 2 0 01-2-2V5a2 2 0 012-2h14a2 2 0 012 2v7" />
                                </svg>
                                <span class="step-title">Assign Team</span>
                            </div>
                            <div class="step-description">
                                RT Team responsible all inquiries in Queue CareRenewal and CareCollection.
                            </div>
                        </div>
                    </div>
                    <svg class="connector-svg" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 20C5 20, 15 10, 35 20" stroke="url(#grad3)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4 4"/>
                        <path d="M30 15L35 20L30 25" fill="none" stroke="url(#grad3)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="step-container">
                        <div class="flex flex-col items-start gap-2">
                            <div class="flex items-center gap-2">
                                <span class="number-icon">4</span>
                                <svg class="step-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                </svg>
                                <span class="step-title">Analyze Issue</span>
                            </div>
                            <div class="step-description">
                                Agent reviews ticket, investigates issue, and documents findings in RT system.
                                <ul class="step-bullets">
                                    <li>On Negotiation / Tracking: Ticket Status "Feedback", Timeline 5 days resolved.</li>
                                    <li>Internal Process: RT Ticket status "Pending", Timeline 10 days resolved.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <svg class="connector-svg" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 20C5 20, 15 10, 35 20" stroke="url(#grad4)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4 4"/>
                        <path d="M30 15L35 20L30 25" fill="none" stroke="url(#grad4)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="grad4" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="step-container">
                        <div class="flex flex-col items-start gap-2">
                            <div class="flex items-center gap-2">
                                <span class="number-icon">5</span>
                                <svg class="step-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <span class="step-title">Resolve/Escalate</span>
                            </div>
                            <div class="step-description">
                                <ul class="step-bullets">
                                    <li>Paid within 24 hours (Promotion code date VS Payment date) Escalate to owner.</li>
                                    <li>After 24 hours RT Agent Activate and complete retain.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <svg class="connector-svg" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 20C5 20, 15 10, 35 20" stroke="url(#grad5)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4 4"/>
                        <path d="M30 15L35 20L30 25" fill="none" stroke="url(#grad5)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="grad5" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="step-container">
                        <div class="flex flex-col items-start gap-2">
                            <div class="flex items-center gap-2">
                                <span class="number-icon">6</span>
                                <svg class="step-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                <span class="step-title">Track Performance</span>
                            </div>
                            <div class="step-description">
                                Create CCare Ticket for the performance.
                            </div>
                        </div>
                    </div>
                    <svg class="connector-svg" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 20C5 20, 15 10, 35 20" stroke="url(#grad6)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4 4"/>
                        <path d="M30 15L35 20L30 25" fill="none" stroke="url(#grad6)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="grad6" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="step-container">
                        <div class="flex flex-col items-start gap-2">
                            <div class="flex items-center gap-2">
                                <span class="number-icon">7</span>
                                <svg class="step-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span class="step-title">Close Ticket</span>
                            </div>
                            <div class="step-description">
                                Mark ticket as 'Resolved,' send customer confirmation, and monitor follow-ups.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sectionTitles = document.querySelectorAll('.section-title[data-section]');
            const templateTitle = document.getElementById('templateTitle');
            const templateContent = document.getElementById('templateContent');
            const copyButton = document.getElementById('copyButton');
            const inquiriesButton = document.getElementById('inquiriesButton');
            const defaultContent = templateContent.innerHTML; // Store default RT Ticket Flow content

            // Section content map
            const sectionContent = {
                "Retention Team Flow": `
                    <div class="data-item">
                        <p>This section describes the Retention Team Flow process.</p>
                        <ul class="step-bullets">
                            <li>Identify customers at risk of churn.</li>
                            <li>Contact customers with retention offers.</li>
                            <li>Update customer status in CRM.</li>
                            <li>Monitor retention metrics.</li>
                        </ul>
                    </div>
                `,
                "Collection Team Flow": `
                    <div class="data-item">
                        <p>This section describes the Collection Team Flow process.</p>
                        <ul class="step-bullets">
                            <li>Review overdue accounts.</li>
                            <li>Send payment reminders.</li>
                            <li>Negotiate payment plans.</li>
                            <li>Update payment status in system.</li>
                        </ul>
                    </div>
                `,
                "RT Ticket Inquiries": `
                    <div class="inquiries-grid">
                        <div class="inquiry-card">
                            <button class="card-title" aria-expanded="false" aria-controls="inquiry-1">Service Availability (Technical-Issue) (Time Frame - 24 hours)</button>
                            <div class="card-content collapsed" id="inquiry-1">
                                <ul class="card-bullets">
                                    <li>Alarm / Lastsmile</li>
                                    <li>Many ONU Down/PON Down</li>
                                    <li>Internet Not Working</li>
                                    <li>No WiFi Signal</li>
                                    <li><span class="card-note">Note:</span> Ticket Created from CCare send to Digital Team only</li>
                                </ul>
                            </div>
                        </div>
                        <div class="inquiry-card">
                            <button class="card-title" aria-expanded="false" aria-controls="inquiry-2">Fulfillment (Time Frame - 24 hours)</button>
                            <div class="card-content collapsed" id="inquiry-2">
                                <p>The type of ticket what customer request to support that not refer to our service down or performance issue</p>
                                <ul class="card-bullets">
                                    <li>Request Relocate / Re-Configure Modem</li>
                                    <li>Request Configure / Re-Configure Router / Access Point</li>
                                    <li>Request Username / Password Login Modem / Router</li>
                                    <li>Request Change Username / Password WiFi Modem / Router</li>
                                    <li>Request Configure Remote Camera</li>
                                    <li>Request NAT Domain / Static IP for Remote Camera</li>
                                    <li>Request Survey LAN/Wi-Fi</li>
                                    <li>Request to add graph / share graph utilization</li>
                                    <li>Request to enable/disable MAC address</li>
                                </ul>
                            </div>
                        </div>
                        <div class="inquiry-card">
                            <button class="card-title" aria-expanded="false" aria-controls="inquiry-3">Service Performance (Technical-Issue) (Time Frame - 24 hours)</button>
                            <div class="card-content collapsed" id="inquiry-3">
                                <ul class="card-bullets">
                                    <li>Internet Slow</li>
                                    <li>Internet Unstable</li>
                                    <li>WiFi Low Signal</li>
                                    <li>Link Budget Low or High</li>
                                    <li>Website Issue</li>
                                    <li>App Issue</li>
                                    <li>Game Issue</li>
                                    <li>Port Access</li>
                                    <li>Protocol / Port Accessing Issue</li>
                                </ul>
                            </div>
                        </div>
                        <div class="inquiry-card">
                            <button class="card-title" aria-expanded="false" aria-controls="inquiry-4">Re-activation (Queue ActivationTeam)</button>
                            <div class="card-content collapsed" id="inquiry-4">
                                <ul class="card-bullets">
                                    <li>Connection which already dismantled with infrastructure provider</li>
                                    <li>Connection which already terminated and removed connectivity/port/device</li>
                                </ul>
                            </div>
                        </div>
                        <div class="inquiry-card">
                            <button class="card-title" aria-expanded="false" aria-controls="inquiry-5">Change Order: Queue Customer Delivery</button>
                            <div class="card-content collapsed" id="inquiry-5">
                                <ul class="card-bullets">
                                    <li>Update Profile</li>
                                    <li>Upgrade Speed</li>
                                    <li>Downgrade Speed</li>
                                    <li>Test Speed</li>
                                    <li>Change Billing Date</li>
                                    <li>Change Location</li>
                                    <li>Change Account Name</li>
                                    <li>Purchase CPE</li>
                                    <li>Purchase Static IP</li>
                                </ul>
                            </div>
                        </div>
                        <div class="inquiry-card">
                            <button class="card-title" aria-expanded="false" aria-controls="inquiry-6">Open Invoice Activities: Queue CareCollection</button>
                            <div class="card-content collapsed" id="inquiry-6">
                                <ul class="card-bullets">
                                    <li>Refuse to Pay Invoice (Has Pending Invoice)</li>
                                    <li>Renewal + Promotion (Has Pending Invoice)</li>
                                    <li>Reactive Request (Has Pending Invoice)</li>
                                    <li>Terminate Request (Has Pending Invoice)</li>
                                    <li>Request Compensation (Has Pending Invoice)</li>
                                    <li>Request Refund (Has Pending Invoice)</li>
                                </ul>
                            </div>
                        </div>
                        <div class="inquiry-card">
                            <button class="card-title" aria-expanded="false" aria-controls="inquiry-7">Billing Issues (Non - Open Invoice): Queue CareRenewal</button>
                            <div class="card-content collapsed" id="inquiry-7">
                                <ul class="card-bullets">
                                    <li>Refuse to Pay Invoice</li>
                                    <li>Renewal + Promotion</li>
                                    <li>Reactive Request</li>
                                    <li>Terminate Request</li>
                                    <li>Request Compensation</li>
                                    <li>Request Refund</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `
            };

            // Function to attach event listeners to card titles
            function attachCardTitleListeners() {
                document.querySelectorAll('.card-title').forEach(title => {
                    // Remove existing listeners to prevent duplicates
                    title.removeEventListener('click', handleCardClick);
                    title.removeEventListener('keydown', handleCardKeydown);
                    // Add new listeners
                    title.addEventListener('click', handleCardClick);
                    title.addEventListener('keydown', handleCardKeydown);
                });
            }

            // Handle card title click
            function handleCardClick() {
                const content = this.nextElementSibling;
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !isExpanded);
                this.classList.toggle('collapsed');
                content.classList.toggle('collapsed');
            }

            // Handle card title keydown
            function handleCardKeydown(event) {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    handleCardClick.call(this);
                }
            }

            // Toggle step description visibility for RT Ticket Flow
            function handleStepClick(e) {
                // Only toggle if clicking on the step-container, not on SVG or number
                if (!e.currentTarget.contains(e.target)) return;
                const desc = e.currentTarget.querySelector('.step-description');
                if (desc) desc.classList.toggle('hidden');
            }

            // Handle section clicks
            sectionTitles.forEach(section => {
                section.addEventListener('click', function() {
                    sectionTitles.forEach(s => s.classList.remove('bg-blue-100'));
                    this.classList.add('bg-blue-100');
                    const sectionName = this.getAttribute('data-section');
                    templateTitle.textContent = sectionName;
                    templateContent.innerHTML = sectionName === 'RT Ticket Flow' ? defaultContent : sectionContent[sectionName] || '';
                    copyButton.classList.remove('hidden');
                    inquiriesButton.classList.toggle('hidden', sectionName !== 'RT Ticket Flow');
                    attachCardTitleListeners(); // Reattach listeners after content update

                    // Hide step descriptions for RT Ticket Flow and add click handler
                    if (sectionName === 'RT Ticket Flow') {
                        templateContent.querySelectorAll('.step-description').forEach(desc => desc.classList.add('hidden'));
                        templateContent.querySelectorAll('.step-container').forEach(step => {
                            step.style.cursor = 'pointer';
                            step.addEventListener('click', handleStepClick);
                        });
                    }
                });

                // Add keyboard support for sections
                section.addEventListener('keydown', function(event) {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        this.click();
                    }
                });
            });

            // Copy button functionality
            copyButton.addEventListener('click', () => {
                const textContent = Array.from(templateContent.querySelectorAll('.step-title, .step-description, .step-bullets li, .card-title, .card-content p, .card-bullets li, .card-note'))
                    .map(el => el.textContent.trim())
                    .filter(text => text)
                    .join('\n');
                navigator.clipboard.writeText(textContent).then(() => {
                    copyButton.textContent = 'Copied!';
                    setTimeout(() => copyButton.textContent = 'Copy Template', 1500);
                });
            });

            // Inquiries button functionality
            inquiriesButton.addEventListener('click', () => {
                templateTitle.textContent = 'RT Ticket Inquiries';
                templateContent.innerHTML = sectionContent['RT Ticket Inquiries'];
                copyButton.classList.remove('hidden');
                attachCardTitleListeners(); // Reattach listeners for new card titles
            });

            // Set default section and hide step descriptions for RT Ticket Flow
            if (sectionTitles.length > 0) {
                sectionTitles[0].classList.add('bg-blue-100');
                sectionTitles[0].focus();
                // Ensure RT Ticket Flow is default and step descriptions are hidden
                templateTitle.textContent = 'RT Ticket Flow';
                templateContent.innerHTML = defaultContent;
                templateContent.querySelectorAll('.step-description').forEach(desc => desc.classList.add('hidden'));
                templateContent.querySelectorAll('.step-container').forEach(step => {
                    step.style.cursor = 'pointer';
                    step.addEventListener('click', handleStepClick);
                });
            }

            // Initial attachment of card title listeners
            attachCardTitleListeners();
        });
    </script>
</body>
</html>
